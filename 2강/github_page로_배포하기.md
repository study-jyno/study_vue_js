
여러분이 Vue-cli 도움을 받아 슉슉 만든 Vue 사이트를 남들도 이용할 수 있게 배포하려면

그냥 작업하던 App.vue 파일 그대로 올리시는게 아니라 

build용 파일을 생성하신 후 그걸 올리셔야합니다. 

왜냐고요? 웹브라우저는 HTML CSS JS 이 세개의 언어만 해석할 수 있습니다. 브라우저는 .vue파일그런거 읽을 줄 모름

그래서 build 라는걸 해주시면 브라우저 친화적인 HTML CSS JS 파일로 바꿔줍니다.

그리고 그걸 웹에 올리셔야 사용자들이 여러분의 사이트를 구경할 수 있는겁니다. 


### Q. 웹서버 가지고 있을 경우 배포는 어떻게 합니까
## 1. 님들이 만든 Vue 프로젝트를 build 하는 법

여러분의 Vue 프로젝트에서 터미널을 켠 후

- `npm run build`

- `yarn build`

둘 중 하나를 입력하시면 됩니다.  

혹시 개발 도중 심각한 에러가 있다면 build는 되지 않습니다.

그러니 터미널에러 / 콘솔창 심각한 에러가 있으면 그것 부터 수정하십시오.

그럼 여러분 Vue 프로젝트 폴더 내에 dist 라는 폴더가 하나 생성됩니다. 

build 하면 파일 사이즈를 존나게 압축해줍니다. 그래서 작고 소중하다는 것임

그리고 파일명도 무작위로 생성해줍니다. 

여기 안에 있는 내용을 모두 서버에 올리시면 됩니다. 

그럼 끝인데 서버가 없다고요? 그럼 github pages를 씁시다. 

 

## 2. 우린 무료 호스팅해주는 github pages에 올릴겁니다
간단하게 HTML/CSS/JS 파일을 무료로 호스팅해주는 고마운 사이트입니다. 

일단 github.com에 들어가셔서 로그인까지 하십시오.

repository를 내이름.github.io 로 생성해 줍니다.

여러분아이디.github.io 말고 임의로 설정하시면 컴퓨터가 과전압으로 폭발하며 여러분 코딩인생도 끝납니다. 

그리고 README 파일 생성도 체크한 뒤에 생성해주시면 됩니다. 

 


3. Repository 생성이 되었다면 여러분 파일을 여기 올리시면 되는데

Repository 생성이 끝나면 repository로 자동으로 들어가질겁니다. 

dist 폴더를 드래그 앤 드롭하는게 아닙니다. dist 폴더 안의 내용물이요.

드래그 앤 드롭하시고 초록버튼까지 눌러주시면 배포 끝입니다. 

이제 10분 정도 후에 아까 여러분이 작성했던 https://여러분아이디.github.io 로 들어가시면 사이트가 보입니다.


4. 혹은 "내아이디.github.io/서브경로" 에다가 발행하고 싶은 경우 


github 문제거나 뭔가 이상할 경우에도 이렇게 해봅시다. 서브경로에 발행하는 방법인데

(1) 아까 만든거 지우지 마시고 repository를 하나 더 만들어봅시다. 아무 이름으로 만드시면 되는데

저는 대충 vue라고 만들겠습니다.

README 파일도 체크해줍니다.

 
(2) 뷰 프로젝트 파일 오픈하셔서 vue.config.js라는 파일을 만들어줍니다.

그리고 다음과 같이 코드를 작성하십시오.

 

publicPath 공간에 /님이만든 repository이름을 적어줍니다.

이게 뭐냐면 원래 Vue 프로젝트를 서브경로, 그러니까 codingapple.com/vue 뭐 이런 경로에 배포하고 싶으면

/vue라고 서브경로를 저기다가 적으셔야합니다. 


(3) npm run build 다시 해줍니다.


(4) dist 안의 프로젝트 파일을 아까 만든 vue라는 이름의 repository에다가 업로드합니다. 드래그 ㄱㄱ
 

(5) 업로드 되었으면 repository 설정으로 들어가서 대충 main, / 경로로 github pages 발행하겠다고 저장해줍니다.

 
(6) 그럼 이제 님들은 내아이디.github.io/vue 여기로 접속하면 님들 vue 프로젝트가 나옵니다.

안보이면 내아이디.github.io/vue/index.html 이걸로 접속해보십쇼 

 

Q1. 왜 사이트 주소로 접속했는데 404 페이지가 뜨죠?

- 10분 더 기다려보십시오.

- ctrl + shift + r 을 이용해 새로고침 해보십시오.

- 님이발행한주소/index.html까지 URL에 작성해보십시오.

- 혹은 맨 처음 내아이디.github.io 라는 repository 생성하실 때 여러분 아이디를 잘못적으신겁니다. 대소문자 틀리지말고 정확히 적으셔야합니다. 

정확히 안적었으면 그냥 다시 하나 새로 만드시면 됩니다. 

Q2. 왜 특정 URL을 입력하면 404 페이지가 뜨죠?

어쩌구.github.io/detail/1 이렇게 세부 페이지 URL을 주소창에 직접 입력하시면

찾는 페이지가 없어요~ 이렇게 404 에러가 날 수 있습니다.

왜냐면 주소창에 뭔가 입력하는건 서버에게 "/detail/1 페이지 주세요"~ 라는 요청을 하는 행위기 때문입니다.

이건 서버에서 "누군가 어쩌구.github.io/어쩌구 로 접속하면 Vue 메인페이지로 보내주세요~" 라고 개발을 해놓으셔야합니다.

근데 github은 우리가 서버를 만지고 어찌할 수 있는게 아니고 그냥 HTML 파일 올린것만 샤락 보여주는 곳이기 때문에

사이트 메뉴에다가 페이지 이동버튼을 잘 만들어두시면 되겠습니다.

아니면 URL에 #기호가 붙는 hash mode를 라우터 코드짤 때 쓰면 해결될 수 있습니다. 

Q3. 업데이트 사항이 생기면 배포 또 어떻게하죠?

 

build 또 하시고 그 파일 그대로 다시 업로드하시면 됩니다.

build 할 때 마다 CSS, JS 파일 명이 dist 폴더 내에 무작위로 다시 생성됩니다.

그래서 새로 배포할 때마다 사이트 방문자들은 새로운 CSS, JS 파일을 이용할 수 있습니다. 
 

Q4. build 할 때 압축 시키지말고 남기고 싶은 파일은?

여러분이 코드짤 때 ./경로로 첨부한 이미지, js 파일들은 전부 압축되고 이름이 변합니다.

이름이 변하지 않게 하고 싶으면 public 폴더안에 넣고 build 해보십시오.

그럼 build 하고 나서도 그대로 루트경로에 파일이 남아있습니다. 

(개발시 그런 파일들을 이용하고 싶으면 public 폴더에 보관하시고 ./ 이게 아닌 / 경로로 import 해오시면 됩니다)

 
Q5. 서버에 올렸는데 왜 접속하면 이상한 페이지가 나오거나 일부 img, css파일이 로드가 안되는 것이죠?


- 기존에 내아이디.github.io가 이미있는 경우 다시 올려버리면 github pages가 가끔 이상해집니다.

- 새로 서브경로로 repository를 만들어서 올려보십시오. 서브폴더에 배포하려면 위의 설정을 따라줍시다.

- 그 전에 당연히 build 할 때 에러 안나셨겠죠 

- 배포한 페이지가 안나오면 크롬개발자도구 열어서 index.html이 쓰고있는 css, js, img 파일들의 경로가 제대로 되어있는지 체크해보도록 합시다. 
